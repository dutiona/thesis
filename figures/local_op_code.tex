\documentclass[varwidth=8cm, border={0.1cm 0.1cm 0.1cm 0.1cm}]{standalone}

\usepackage{minted}

\setminted[python]{fontsize=\scriptsize}

\begin{document}

\begin{minted}{python}
def local_op(img, se, op, out):
  for pnt in img.points():
    out(pnt) = img(pnt)
    for nx in se(pnt):
      out(pnt) = op(out(pnt), img(nx))
\end{minted}

\end{document}
