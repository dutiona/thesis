\documentclass[varwidth=4cm,border={0.1cm 0.1cm 0.1cm 0.1cm}]{standalone}

\usepackage{minted}

\setminted[c++]{fontsize=\scriptsize}

\begin{document}
\begin{minted}{c++}
template <class InImage>
void gamma_correction(
  InImage& in,
  double gamma)
{
  for (auto p :
    in.get_iterator())
  auto& v = in.get_pixel(p)
            .val();
  // correct v with gamma
}
\end{minted}
\end{document}